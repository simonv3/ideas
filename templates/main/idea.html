{% extends "main/base.html" %}

{% block content %}

{% if edit %}

<form action="" method="post" id="edit-idea">{%csrf_token%}
    <ul>
        <li>
        <label for="id_idea_content"> Edit idea:</label><br/>
                {{ ideaForm.idea_content }}
                </li>
                <li>
            <label for="id_tags">Elaborate:</label><br/>
                {{ideaForm.elaborate}}
            </li>

            <li>
            <label for="id_tags">Edit tags:</label><br/>
            {{ideaForm.tags}}
            </li>
            <li><input type="submit" class="red-gradient submit-button"
            name="edit_idea" value="Save" /></li>
    </ul>


    {% else %}
    <div class="span-4">
        <div class="idea-container">
            <div class="idea-vote {% if voted_on %}voted_on{% endif %}">{% include "main/sub_vote.html" %}</div>
            <div class="idea-blurb">{{idea.idea}}</div>
            {% if idea.elaborate %}
            <div class="idea-elaborate">{{idea.elaborate}}</div>
            {% endif %}
        </div>
        <div class="right-bar">
            {% ifequal idea.user request.user %}
            <a class="edit-link {% if idea.started %}started{%endif%}" 
                href="{% url app.views.idea idea.id %}edit/">manage idea</a>
        {% endifequal %}
        {% for tag in tags %}
        <a class="tag blue-gradient" href="/tags/{{tag.tag}}/" title="{{tag.tag}}">{{tag.tag}}</a>
        {#<a href="{% url view-tag tag.tag %}" title="{{tag.tag}}">{{tag.tag}}</a>#}
        {% endfor %}
        </div>
    </div>
{% endif %}
<div style="clear:both;"></div>


{% if not edit %}
{% if perms.app.add_comment %}

<form action="" method="post" id="comment-form">{% csrf_token %}
    <ul>
        <li><label for="id_comment">Add a comment:</label><br/>
        {{ commentForm.comment }}</li>
    </ul>
<input type="submit" class="red-gradient submit-button" name="submit_comment" value="Submit" />
</form>
{% endif %}
{% endif %}
{% if relevant_comments %}

<ul id="idea-comments">
{% for comment in relevant_comments %}
<li class="{% cycle 'odd' 'even' %}">{{comment.text}}  <span
    class="author">&#126;
    {{comment.user}}<br/>
    <span class="timesince">{{comment.date_posted|timesince}} ago</span></span>
    <div style="clear:both;"></div>
</li>
{% endfor %}
</ul>
{% endif %}
{% endblock %}


